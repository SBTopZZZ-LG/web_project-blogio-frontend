<!DOCTYPE html>
<html>

<head>
    <title>Sign up - Blog.io</title>
    <link rel="icon" type="image/x-icon" href="/web_project-blogio-frontend/images/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="/web_project-blogio-frontend/js/userauth.js"></script>
</head>

<script>
    async function signUp() {
        const username = document.getElementById("usernamefield").value
        const email = document.getElementById("emailfield").value
        const password = document.getElementById("passwordfield").value
        const password2 = document.getElementById("passwordfield2").value

        if (username.trim().length === 0)
            return window.alert("Invalid username")
        if (!/[a-z0-9\._]+@[a-z0-9\._]+/.test(email))
            return window.alert("Email is invalid")
        if (password.length < 6 || password.length > 16)
            return window.alert("Password is too " + (password.length < 6 ? "short" : "long"))
        if (password !== password2)
            return window.alert("Passwords do not match")

        register(username, email, password, (success) => {
            if (!success)
                return window.alert("Failed to sign up")

            // Register
            // Goto Login page
            window.alert("Signed up! You can now proceed to log in.")
            window.location.href = "/web_project-blogio-frontend/html/signin.html"
        })
    }
</script>

<body style="width: 100%; height: 100%;">
    <!-- Nav bar -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid" style="display: inline-flex; justify-content: left;">
                <!-- Blog.io icon -->
                <img src="/web_project-blogio-frontend/images/blog.png" alt="Favicon" width="25px" height="25px"
                    style="margin-left: 10px; margin-right: 10px; cursor: pointer;"
                    onclick="window.location.href = '/web_project-blogio-frontend/index.html'" />
                
                <!-- Blog.io text -->
                <a class="navbar-brand" href="/web_project-blogio-frontend/index.html">Blog.io</a>
            </div>
        </nav>
    </header>

    <div style="width: 100%; height: 100%; display: flex; justify-content: center;">
        <div class="card" style="width: 500px; height: fit-content; margin-top: auto; margin-bottom: auto;">
            <div class="card-body" style="margin-top: 50px; margin-bottom: 50px;">
                <h2>Sign Up</h2>
                <br>
                <div class="form-floating mb-3">
                    <input type="name" class="form-control" id="usernamefield" placeholder="name@example.com">
                    <label for="floatingInput">User name</label>
                </div>
                <br />
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="emailfield" placeholder="name@example.com">
                    <label for="floatingInput">Email address</label>
                </div>
                <div class="form-floating">
                    <input type="password" class="form-control" id="passwordfield" placeholder="Password">
                    <label for="floatingPassword">Password</label>
                </div>
                <div class="form-floating" style="margin-top: 5px;">
                    <input type="password" class="form-control" id="passwordfield2" placeholder="Password">
                    <label for="floatingPassword">Re-enter Password</label>
                </div>
                <br />
                <div style="width: 100%; height: fit-content; display: flex; justify-content: center;">
                    <a class="btn btn-outline-dark" onclick="signUp();">Sign Up</a>
                </div>
                <br />
                <hr />
                <br />
                <div style="width: 100%; display: inline-flex; justify-content: center;">
                    <p style="margin-top: auto; margin-bottom: auto; margin-right: 25px;">Already have an account?</p>
                    <a class="btn btn-outline-dark" href="/web_project-blogio-frontend/html/signin.html">Sign In Now</a>
                </div>
            </div>
        </div>
    </div>
</body>

</html>